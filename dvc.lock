schema: '2.0'
stages:
  get_data:
    cmd: python src/data/make_dataset.py
    deps:
    - path: data/external/test.txt
      hash: md5
      md5: a1cab28ad8554fd9269d31e5708469d0
      size: 32724891
    - path: data/external/train.txt
      hash: md5
      md5: 13fd241a41370119612d5b00b0433009
      size: 93921671
    - path: data/external/val.txt
      hash: md5
      md5: 7b1e28b1e91582c6f36e85517c3cc6ee
      size: 46258330
    outs:
    - path: data/raw/test.csv
      hash: md5
      md5: 5f018844567fe9ab4547ee91d8603429
      size: 33093163
    - path: data/raw/train.csv
      hash: md5
      md5: ad11e08546ac0f3c8de4f72e8174e90a
      size: 94979141
    - path: data/raw/val.csv
      hash: md5
      md5: 926acde337b8d43b2cf2060704d4edf3
      size: 46779227
  preprocess:
    cmd: python src/data/preprocess_data.py
    deps:
    - path: data/raw/test.csv
      hash: md5
      md5: 5f018844567fe9ab4547ee91d8603429
      size: 33093163
    - path: data/raw/train.csv
      hash: md5
      md5: ad11e08546ac0f3c8de4f72e8174e90a
      size: 94979141
    - path: data/raw/val.csv
      hash: md5
      md5: 926acde337b8d43b2cf2060704d4edf3
      size: 46779227
    outs:
    - path: data/processed/char_index.pkl
      hash: md5
      md5: 941dc7e5461b0a429941866a00102b8c
      size: 444
    - path: data/processed/x_test.pkl
      hash: md5
      md5: 7f5fbed778d9ef617aa8deb518b714fc
      size: 291358564
    - path: data/processed/x_train.pkl
      hash: md5
      md5: dea96dc4ab5dbc8e5a6a0e2ebb31c4fd
      size: 836619364
    - path: data/processed/x_val.pkl
      hash: md5
      md5: bc347070a05b7a577842ad6ee6a42ef6
      size: 412063364
    - path: data/processed/y_test.pkl
      hash: md5
      md5: c7556cbce9bb0103e4a3172acb76d80e
      size: 1456954
    - path: data/processed/y_train.pkl
      hash: md5
      md5: 46f113e6a40a467378c314b3610b456a
      size: 4183258
    - path: data/processed/y_val.pkl
      hash: md5
      md5: 49354a62c9b72a64ea6ad960b3074dd9
      size: 2060478
  create_model:
    cmd: python src/models/create_model.py
    deps:
    - path: data/processed/char_index.pkl
      hash: md5
      md5: 941dc7e5461b0a429941866a00102b8c
      size: 444
    params:
      params.yml:
        batch_test: 5000
        batch_train: 5000
        categories:
        - phishing
        - legitimate
        char_index: None
        dataset_dir: ../dataset/small_dataset/
        embedding_dimension: 50
        epoch: 1
        loss_function: binary_crossentropy
        optimizer: adam
        sequence_length: 200
    outs:
    - path: models/model.keras
      hash: md5
      md5: 60dd14215201ac924d1f5a926c8e88a9
      size: 5472087
  predict:
    cmd: python ./src/models/predict.py
    deps:
    - path: ./data/processed/x_test.pkl
      hash: md5
      md5: 7f5fbed778d9ef617aa8deb518b714fc
      size: 291358564
    - path: ./models/model.keras
      hash: md5
      md5: 60dd14215201ac924d1f5a926c8e88a9
      size: 5472087
    outs:
    - path: ./data/prediction/prediction.json
      hash: md5
      md5: 463deb54718ea731c7723df963124d8c
      size: 371
