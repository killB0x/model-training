schema: '2.0'
stages:
  get_data:
    cmd: python src/data/make_dataset.py
    deps:
    - path: data/external/test.txt
      hash: md5
      md5: a1cab28ad8554fd9269d31e5708469d0
      size: 32724891
    - path: data/external/train.txt
      hash: md5
      md5: 13fd241a41370119612d5b00b0433009
      size: 93921671
    - path: data/external/val.txt
      hash: md5
      md5: 7b1e28b1e91582c6f36e85517c3cc6ee
      size: 46258330
    outs:
    - path: data/raw/test.csv
      hash: md5
      md5: c54e0a1a4da29ece7f8c77e263e0dc78
      size: 32698979
    - path: data/raw/train.csv
      hash: md5
      md5: d407bfee8f81660d6229a846aa9053c7
      size: 93780565
    - path: data/raw/val.csv
      hash: md5
      md5: 6bf45cfbecd21c3737e64193bda600f2
      size: 46209461
  preprocess:
    cmd: python src/data/preprocess_data.py
    deps:
    - path: data/raw/test.csv
      hash: md5
      md5: c54e0a1a4da29ece7f8c77e263e0dc78
      size: 32698979
    - path: data/raw/train.csv
      hash: md5
      md5: d407bfee8f81660d6229a846aa9053c7
      size: 93780565
    - path: data/raw/val.csv
      hash: md5
      md5: 6bf45cfbecd21c3737e64193bda600f2
      size: 46209461
    outs:
    - path: data/processed/char_index.pkl
      hash: md5
      md5: 3ef2bb44f1b3ad4be6699d0e90983973
      size: 444
    - path: data/processed/tokenizer.pkl
      hash: md5
      md5: c417a6d2241d34bf9c2eb17b0ed329a0
      size: 2359
    - path: data/processed/x_test.pkl
      hash: md5
      md5: c0c7c1a8651db832de8e03dfdfdd42ea
      size: 291121764
    - path: data/processed/x_train.pkl
      hash: md5
      md5: 89f3c9140d968b6d27fa463a44c36d50
      size: 835547364
    - path: data/processed/x_val.pkl
      hash: md5
      md5: 0fd1fab2f571bd604b838871140f1b56
      size: 411674564
    - path: data/processed/y_test.pkl
      hash: md5
      md5: 6b429fa4de9676513fa9ad8fec59da6c
      size: 2911378
    - path: data/processed/y_train.pkl
      hash: md5
      md5: 12a59eff2b2b3eca823ff78415929942
      size: 8355634
    - path: data/processed/y_val.pkl
      hash: md5
      md5: 50bf70aee99e6b848e0a861296a0791e
      size: 4116906
  create_model:
    cmd: python src/models/create_model.py
    deps:
    - path: data/processed/char_index.pkl
      hash: md5
      md5: 3ef2bb44f1b3ad4be6699d0e90983973
      size: 444
    params:
      params.yml:
        batch_test: 5000
        batch_train: 5000
        categories:
        - phishing
        - legitimate
        char_index: None
        dataset_dir: ../dataset/small_dataset/
        embedding_dimension: 50
        epoch: 1
        loss_function: binary_crossentropy
        optimizer: adam
        sequence_length: 200
    outs:
    - path: models/model.keras
      hash: md5
      md5: 1f88f1f516d03311662b66c312381ba7
      size: 5472087
  predict:
    cmd: python ./src/models/predict.py
    deps:
    - path: ./data/processed/x_test.pkl
      hash: md5
      md5: c0c7c1a8651db832de8e03dfdfdd42ea
      size: 291121764
    - path: ./models/model.keras
      hash: md5
      md5: 1f88f1f516d03311662b66c312381ba7
      size: 5472087
    outs:
    - path: ./data/prediction/prediction.json
      hash: md5
      md5: 8e10998be709e749acbc8929ad227fd7
      size: 372
